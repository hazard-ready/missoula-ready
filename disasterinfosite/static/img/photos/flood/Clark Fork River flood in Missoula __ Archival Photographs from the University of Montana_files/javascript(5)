
var ENTER_KEY_CODE=13,URL_DELIMITER="/",ERROR_STRING="error",ON_STRING="on",OFF_STRING="off",ALL_STRING="all",ANY_STRING="any",EXACT_STRING="exact",OR_STRING="or",AND_STRING="and",SUCCESS_STRING="success",FAILURE_STRING="failure",RESTRICTED_STRING="restricted",JSON_STRING="json",CLICK_STRING="click",SINGLE_ITEM_STRING="singleitem",COMPOUND_OBJECT_STRING="compoundobject",FULL_BROWSER_STRING="fullbrowser",FULL_BROWSER_LOAD_STRING="cdmfullbrowserload",FAVORITES_STRING="favorites",SEARCH_STRING="search",COLLECTION_STRING="collection",ID_STRING="id",PAGE_STRING="page",PAGE_ID_STRING="pageid",TYPE_STRING="type",SHOW_STRING="show",REF_STRING="ref",REC_STRING="rec",FILENAME_STRING="filename",VIEW_STRING="view",PDF_STRING="pdf",PDF_PAGE_STRING="pdfpage",NEWSPAPER_STRING="newspaper",MONOGRAPH_STRING="monograph",DOCUMENT_PDF_STRING="document-pdf",DOCUMENT_PDF_UPPERCASE_STRING="Document-PDF",DOCUMENT_EAD_STRING="document-ead",HTML_STRING="html",VIEWER_TYPE_AUDIO="audio",VIEWER_TYPE_VIDEO="video",VIEWER_TYPE_SHOW_LINK="showLink",VIEWER_TYPE_URL="url",VIEWER_TYPE_FINDING_AID="findingaid",DOWNLOAD_STRING="download",PRINT_STRING="print",PRINT_VIEW_STRING="printview",FULL_TEXT_STRING="fulltext",COMMENT_STRING="comment",LIST_STRING="list",CLOUD_STRING="cloud",IMG_STRING="img",IMAGE_STRING="image",FILENAME_STRING="filename",PX_STRING="px",JP2_STRING="jp2",JPG_STRING="jpg",JPEG_STRING="jpeg",GIF_STRING="gif",PNG_STRING="png",TIFF_STRING="tiff",TIF_STRING="tif",DISPLAY_STRING="display",INLINE_STRING="inline",NONE_STRING="none",BLOCK_STRING="block",CURSOR_STRING="cursor",WIDTH_STRING="width",HEIGHT_STRING="height",CDM_HIDE_STRING="cdm_hide",CPD_TYPE_STRING="cpdtype"
DEFAULT_RADIX_VALUE=10,SELECTOR_CDM_CPDTYPE="#cdm_cpdtype",SELECTOR_CDM_SHOW="#cdm_show",SELECTOR_CDM_ID="#cdm_id",SELECTOR_CDM_ITEM_TYPE="#cdm_item_type",SELECTOR_CDM_VIEW="#cdm_view",SELECTOR_CDM_COLLECTION="#cdm_collection",SELECTOR_CDM_RETURNVIEW="#cdm_returnview",SELECTOR_CDM_FILENAME="#cdm_filename",SELECTOR_CDM_PAGEPTR="#cdm_pageptr",SELECTOR_CDM_HOST="#cdm_host",SELECTOR_CDM_TAGS="#cdm_tags",SELECTOR_IMG_VIEW_CONTAINER="#img_view_container",SELECTOR_COLLECTION_HOME_URL="#collectionHomeUrl",SELECTOR_CDM_FILESIZE="#cdm_filesize",SELECTOR_CDM_ITEM_TITLE="#cdm_item_title",SELECTOR_CDM_FILENAME="#cdm_filename",CLASS_CDM_HIDE="cdm_hide",UTILS_CONTROLLER_STRING="utils",CDM_CONTROLLER_STRING="cdm",IE_11_VERSION=11,IE_10_VERSION=10,IE_9_VERSION=9,IE_8_VERSION=8,IE_7_VERSION=7,ITEM_VIEWER_DEFAULT_HEIGHT=464;var cdm=cdm?cdm:{};cdm.util=cdm.util?cdm.util:{};cdm.api=cdm.api?cdm.api:{};cdm.ugc=cdm.ugc?cdm.ugc:{};cdm.gvars=cdm.gvars?cdm.gvars:{};cdm.viewUpdater=cdm.viewUpdater?cdm.viewUpdater:{};cdm.PageFlipView=cdm.PageFlipView?cdm.PageFlipView:{};cdm.viewUpdater.viewPrefix="img_view_";cdm.cdmHttps=cdmHttps;cdm.gvars.browseLink=0;cdm.gvars.itemcollection;cdm.gvars.collection="";cdm.gvars.collectionLink="";cdm.gvars.addThisDefaults="email, digg, delicious, facebook, myspace, twitter, twitthis, google, live, stumbleupon, friendster, more";cdm.gvars.collectionFieldsInfo=new Array();cdm.gvars.dublinFieldsInfo=new Array();cdm.gvars.collectionsOn=0;cdm.gvars.activeCollection="";cdm.gvars.protocol="http://";cdm.gvars.qvItem;cdm.gvars.qvBGColor;cdm.gvars.qvBorderColor;var fullTextSearchTerm="";cdm.gvars.flashKill=false;cdm.gvars.itemViewerDefaultHeight=464;cdm.gvars.itemViewerOldHeight=464;cdm.gvars.itemViewerDiff=0;cdm.gvars.cdmError="cdmerror";cdm.gvars.thumbContainer="#cdm_thumb_container";cdm.gvars.compObjActiveTab=0;cdm.gvars.lazyLoaderCSSClass="cdm_lazyload";cdm.gvars.lazyLoaderAttribute="data-original";cdm.gvars.compoundObjectResizeTimer=false;cdm.gvars.defaultContentPaneHeight=870;cdm.gvars.windowPath="";cdm.gvars.validHttpErrorAlertCodes=new Array(404,500);cdm.gvars.compoundObjectString="compoundobject";cdm.gvars.fullBrowserString="fullbrowser";cdm.gvars.singleItemString="singleitem";cdm.gvars.internetExplorerVersion;cdm.gvars.isInternetExplorer=false;cdm.gvars.cdmBrowserType;cdm.gvars.cdmPlatformIsMac=false;CDM_BROWSER_IE="Microsoft Internet Explorer";CDM_BROWSER_FIREFOX="Firefox";CDM_BROWSER_SAFARI="Safari";CDM_BROWSER_CHROME="Chrome";CDM_MAC_STRING="Mac";cdm.util.ConsoleLogger=function(msg){if(typeof console!=='undefined'){console.log(msg);}};cdm.util.LogLoadTimes=function(cdmShowLoadTimes,logString){if(cdmShowLoadTimes===ON_STRING){theTime=new Date().getTime();if(logString==="start"){cdm.gvars.startTime=theTime;return theTime;}else{logStringTime=(theTime-cdm.gvars.startTime)/1000;cdm.util.ConsoleLogger("time to "+logString+" is: "+logStringTime);}}}
cdm.util.checkForInternetExplorerCompatibilityMode=function(){if(navigator.userAgent.indexOf("compatible; MSIE 7")>-1){cdm.gvars.isInternetExplorer=true;cdm.gvars.internetExplorerVersion=IE_7_VERSION;}};cdm.util.checkForInternetExplorerAndVersion=function(){cdm.util.checkForInternetExplorerCompatibilityMode();if(!cdm.gvars.isInternetExplorer){if(Modernizr.borderimage){cdm.gvars.internetExplorerVersion=IE_11_VERSION;}else{cdm.gvars.internetExplorerVersion=IE_10_VERSION;}
if(navigator.appName===CDM_BROWSER_IE||navigator.userAgent.indexOf("Trident")>-1){cdm.gvars.isInternetExplorer=true;}}
cdm.util.checkUserAgentAndPlatformString();};cdm.util.checkUserAgentAndPlatformString=function(){if(cdm.gvars.isInternetExplorer){cdm.gvars.cdmBrowserType=CDM_BROWSER_IE;}else if(navigator.userAgent.indexOf(CDM_BROWSER_CHROME)>-1){cdm.gvars.cdmBrowserType=CDM_BROWSER_CHROME;}else if(navigator.userAgent.indexOf(CDM_BROWSER_SAFARI)>-1){cdm.gvars.cdmBrowserType=CDM_BROWSER_SAFARI;}else if(navigator.userAgent.indexOf(CDM_BROWSER_FIREFOX)>-1){cdm.gvars.cdmBrowserType=CDM_BROWSER_FIREFOX;}
if(navigator.platform.indexOf(CDM_MAC_STRING)>-1){cdm.gvars.cdmPlatformIsMac=true;}};cdm.util.hasEvent=function(elem,event){if(typeof $(elem)[0]==='undefined'){return false;}else{if($.data($(elem).get(0),'events')===null){return false;}else if(typeof $.data($(elem).get(0),'events')==='undefined'){return false;}else if(typeof $.data($(elem).get(0),'events')[event]==='undefined'){return false;}else{return true;}}};cdm.util.ajaxErrorAlerts=function(errMsg,a,b,c){errorStatus=cdm.util.checkAjaxErrorObject(a);if($("#cdm_language_"+errMsg).exists()&&errorStatus){theerrmsg=$("#cdm_language_"+errMsg).val();if(theerrmsg.indexOf("\\n")>-1){nm="";msgparts=theerrmsg.split("\\n");for(m=0;m<msgparts.length;m++){nm=nm+$.trim(msgparts[m])+"\n";}
alert(nm);}else{alert(theerrmsg);}}else{cdm.util.ConsoleLogger(errMsg);}};cdm.util.checkAjaxErrorObject=function(errObj){err=false;if(typeof(errObj==="Object")){for(e=0;e<cdm.gvars.validHttpErrorAlertCodes.length;e++){if(errObj.status===cdm.gvars.validHttpErrorAlertCodes[e]){err=true;}}}
return err;};cdm.util.killFlash=function(){if($("#flash_wrapper").exists()){$("#flash_wrapper").html("unloading...");}
if($("#video_wrapper").exists()){$("#video_wrapper").html("unloading...");}
if(cdm.gvars.flashKill){if($("#cdmVideoErrorMessage").exists()){$("#cdmVideoErrorMessage").remove();}}
cdm.gvars.flashKill=false;};cdm.util.hidePDF=function(){if($("#cdm_view").exists()){v=$("#cdm_view").val();if(v==="singleitem"||v==="compoundobject"){if(cdm.ItemViewer.itemMapsTo==="pdf"){if($("#itemViewer").css("height")!=="0px"){cdm.gvars.itemViewerHeight=$("#itemViewer").css("height");}
$("#itemViewer").css("height","0");}}}};cdm.util.lazyBinder=function(){if($(cdm.gvars.thumbContainer).exists()){cdm.util.lazyLoader();$(cdm.gvars.thumbContainer).scroll($.throttle(750,cdm.util.lazyLoader));}};cdm.util.lazyLoader=function(){if(cdm.gvars.compObjActiveTab===0){thumbContainerPos=$(cdm.gvars.thumbContainer).offset();var cdmThumbContainerHeightOffset=$(cdm.gvars.thumbContainer).height()+thumbContainerPos.top;$(cdm.gvars.thumbContainer).find('img.'+cdm.gvars.lazyLoaderCSSClass).each(function(){myCoords=$(this).offset();if(myCoords.top<cdmThumbContainerHeightOffset&&myCoords.top>thumbContainerPos.top){cdm.util.lazyLoaderImageSrcUpdater(this,cdm.gvars.lazyLoaderAttribute,cdm.gvars.lazyLoaderCSSClass);}});}};cdm.util.lazyLoaderImageSrcUpdater=function(ele,att,lazyClass){$(ele).attr("src",$(ele).attr(att));$(ele).removeClass(lazyClass);if($(ele).hasClass("co-selected-thumb")){myParentID=$(ele).parent().attr("item_id");if($("#cdm_cpdtype").val()==="Document-PDF"){myParentPageId=$(ele).parent().attr("page_id");}else{myParentPageId="none";}
$(ele).on("load",function(event){cdm.CompoundObject.loadSelectedImage(myParentID,myParentPageId);});}};cdm.util.jcarouselLazyClassCheck=function(jcInstance,jcListItem,idx,btnState){$(jcListItem).find('img.'+cdm.gvars.lazyLoaderCSSClass).each(function(){cdm.util.lazyLoaderImageSrcUpdater(this,cdm.gvars.lazyLoaderAttribute,cdm.gvars.lazyLoaderCSSClass);});};cdm.util.pageRedirector=function(redirectUrl){window.location.href=redirectUrl;};cdm.util.getLocationPathname=function(path){if(path.length===0){windowPath=window.location.pathname;}else{windowPath=path;}
return windowPath;};cdm.util.buildUrl=function(elements,protocolAndHost){protocolAndHost=(typeof protocolAndHost==="undefined")?"":protocolAndHost;var newElements=new Array();for(var i=0;i<elements.length;i++){if(elements[i]===0){elements[i]=elements[i].toString();}
if(elements[i]){newElements.push(elements[i]);}}
return protocolAndHost+URL_DELIMITER+newElements.join(URL_DELIMITER);};cdm.util.cleanEncodedStringsForDisplay=function(replaceMeArr,replacersArr,theString){for(r=0;r<replaceMeArr.length;r++){theString=theString.replace(replaceMeArr[r],replacersArr[r]);}
return theString;};cdm.util.isItemTypeImage=function(itemtype){var imageTypes=new Array(JP2_STRING,JPG_STRING,JPEG_STRING,GIF_STRING,PNG_STRING,TIFF_STRING,TIF_STRING);var length=imageTypes.length;for(var i=0;i<length;i++){if(imageTypes[i]===itemtype)return true;}
return false;};cdm.util.isMobile=function(){var isMobile=(function(){try{return'ontouchstart'in document.documentElement;}catch(e){return false;}})();return isMobile;};var dd_flags=[];var print_button_options_dd_open=false;var print_button_options_content_focus=false;var print_button_options_link_focus=false;var download_button_options_dd_open=false;var download_button_options_content_focus=false;var download_button_options_link_focus=false;var browse_content_focus=false;var browse_link_focus=false;var nav_top_left_browse_dd_open=false;dd_flags["search_sort_by_content_focus"]=false;dd_flags["search_sort_by_link_focus"]=false;dd_flags["search_sort_by_dd_open"]=false;dd_flags["search_display_content_focus"]=false;dd_flags["search_display_link_focus"]=false;dd_flags["search_display_dd_open"]=false;dd_flags["search_results_content_focus"]=false;dd_flags["search_results_link_focus"]=false;dd_flags["search_results_dd_open"]=false;dd_flags["nav_top_right_language_link_focus"]=false;dd_flags["nav_top_right_language_content_focus"]=false;dd_flags["nav_top_right_language_dd_open"]=false;var img_view_search_box_open=false;var search_box_width=0;var link_bar_height=17;var icon_width=26;$.fn.exists=function(){return jQuery(this).length>0;};function window_scroll_to_selector(selector){var y=($(selector).offset().top-50)+"px";$(window).scrollTo({top:y,left:'0px',easing:'swing'},800);}
function get_ntr_lang_margin_left(){return"-"+($("#nav_top_right_language_dd_container").width()-$("#nav_top_right_language_dd_link").width()-25)+"px";}
function toggle_dropdown_content(name,state){if(state==="close"){if($("#"+name+"_dd_content").exists()){$("#"+name+"_dd_content").slideUp(200);$("#"+name+"_dd_link").removeClass(name+"_dd_link_hover");eval("dd_flags['"+name+"_dd_open'] = false;");$("#"+name+"_dd_link").blur();fix_dropdown_overlap("show",name);}}else{$("#"+name+"_dd_content").slideDown(300);eval("dd_flags['"+name+"_dd_open'] = true;");if(cdm.gvars.internetExplorerVersion>IE_7_VERSION){$("#"+name+"_dd_link").addClass(name+"_dd_link_hover");}
fix_dropdown_overlap("hide",name);}}
function fix_dropdown_overlap(display,name){if(name==="search_sort_by"){if(display==="show"){$("#search_display_dd_container").show();}else{$("#search_display_dd_container").hide();}}}
function dropdown_mouse_toggle(selector,type,action){var typeSwitch="link";if(action==="over"){dd_flags[selector+"_"+type+"_focus"]=true;}else{if(type==="link"){typeSwitch="content";}
setTimeout("if(dd_flags['"+selector+"_"+typeSwitch+"_focus'] === false) toggle_dropdown_content('"+selector+"', 'close');",500);dd_flags[selector+"_"+type+"_focus"]=false;}}
function create_dropdown(dd_name){if($("#"+dd_name+"_dd_link").exists()){$(function(){config={sensitivity:3,interval:50,over:function(){dropdown_mouse_toggle(dd_name,'link','over');},timeout:200,out:function(){dropdown_mouse_toggle(dd_name,'link','out');}};config.sensitivity=1;config.interval=0;config.over=function(){dropdown_mouse_toggle(dd_name,'content','over');};config.out=function(){dropdown_mouse_toggle(dd_name,'content','out');};$("#"+dd_name+"_dd_content").hoverIntent(config);$("#"+dd_name+"_dd_link").click(function(){if(!dd_flags[dd_name+"_dd_open"]){toggle_dropdown_content(dd_name,'open');}else{toggle_dropdown_content(dd_name,'close');}});});if($(".dd_option").exists()){$(".dd_option").hover(function(){$(this).addClass("dd_option_hover");},function(){$(this).removeClass("dd_option_hover");});$(".dd_option").click(function(){var dd_link_id="#"+$(this).parent().attr("id").split("_dd_")[0]+"_dd_link_text";$(dd_link_id).html($(this).html());$(this).parent().slideUp(200);});}}}
function button_mouse_toggle(name,button,toggleSwitch){$(button).toggleClass(name+"_button_hover",toggleSwitch);$(button).find("span."+name+"_button_icon").toggleClass(name+"_button_icon_hover",toggleSwitch);}
function open_accordion_section(name,heading){$("#"+name+"_accordion "+cdm.gvars.accordionHeading).each(function(){if(!$(this).hasClass("accordion_header_closed")){$(this).click();}});$(".accordion_window").hide();$("#"+name+"_accordion_"+heading+"_link").click().next().show(200);}
function cdm_accordion_ini(accordion,active){if(active){accordion.find("span.ui-icon").addClass("accordion_header_icon accordion_header_icon_closed");accordion.find(cdm.gvars.accordionHeading+":first span.ui-icon:first").removeClass("accordion_header_icon_closed").addClass("accordion_header_icon_open");}else{accordion.find(cdm.gvars.accordionHeading+".ui-accordion-header").removeClass("accordion_header_open").addClass("accordion_header_closed").find("span.ui-icon").addClass("accordion_header_icon accordion_header_icon_closed");}}
function cdm_reset_accordion_tabindexes(){$(cdm.gvars.accordionHeading+".accordion_header").each(function(){$(this).attr("tabindex",$(this).attr("thetabindex"));});}
var dialogOpts={draggable:true,width:490,autoOpen:false,modal:true};function create_new_dialog(name,dialogOpts){if($("#"+name+"_link").exists()){var x=$("#"+name+"_link").offset().left-icon_width;var y=$("#"+name+"_link").offset().top+link_bar_height-window.scrollY;if(isNaN(y)){y=$("#"+name+"_link").offset().top+link_bar_height-document.documentElement.scrollTop;}
if(name==="login"||name==="report_abuse"){if(dialogOpts.position[1]!==0){dialogOpts.position[1]=[y];}
if(dialogOpts.position[0]!==0){dialogOpts.position[0]=[x];}}else{dialogOpts.position=[x,y];}
var thisDialog=$("#"+name+"_dialog").dialog(dialogOpts);init_dialog_css(thisDialog);if(name!=="ratings"){$("#"+name+"_dialog").dialog("open");}}}
function init_dialog_css(dialog){var dialog_title_bar=dialog.prev();dialog_title_bar.parent().addClass("dialog");dialog_title_bar.addClass("dialog_title_bar");dialog_title_bar.find("span:first").addClass("dialog_title_bar_title");dialog_title_bar.find("a:first").addClass("dialog_title_bar_close_link");var closingSpan=dialog_title_bar.find("a:first").html();closeText=$("#cdm_language_close").val();if(closingSpan.indexOf(closeText)===-1){closingSpan=closeText+closingSpan;dialog_title_bar.find("a:first").html(closingSpan);}
dialog_title_bar.find("a:first span:first").addClass("dialog_title_bar_close_link_inner").addClass("float_right");if(dialog.selector==="#display_options_dialog"){dialog_title_bar.find("a:first").attr("tabindex",cdm.api.Results.displayOptionsTabIndexEsc);}
dialog.addClass("dialog_content");$(".ui-dialog").css("position","absolute");}
function languageSelectRedir(item){toggle_dropdown_content("nav_top_right_language",'close');cdm.util.killFlash();var lg="/lang/";var windowPath=cdm.util.getLocationPathname(cdm.gvars.windowPath);if(windowPath==="/"){windowPath="/cdm/";}
if(windowPath===$("#collectionHomeUrl").val()){lg="index/lang/";}else if(windowPath.substring(windowPath.length-1)==="/"){lg="lang/";}
if(windowPath.indexOf("lang")>-1){windowPath=windowPath.substring(0,windowPath.indexOf("lang"));lg="lang/";}
cdm.util.pageRedirector(windowPath+lg+$(item).attr("lang"));}
function submit_logout(){$("#currentUser").html("");$("#login_link").html(cdm.gvars.loginText);}
function redirectToProtocol(direction){var protocol=(cdm.cdmHttps==='on'&&direction==='in')?'https':'http';var curHost=window.location.hostname;var winLocPort=(window.location.port!=='')?':'+window.location.port:'';var curPort='';if(direction==='in'){curPort+=(cdmSecureWebsitePort!=='')?':'+cdmSecureWebsitePort:winLocPort;}else{curPort+=(cdmInsecureWebsitePort!=='')?':'+cdmInsecureWebsitePort:winLocPort;}
var curPath=window.location.pathname;cdm.util.pageRedirector(protocol+'://'+curHost+curPort+curPath);}
cdm.init=function(){cdm.gvars.loginText=$("#cdm_language_login").val();cdm.gvars.logoutText=$("#cdm_language_logout").val();cdm.gvars.accordionHeading=$("#cdm_view").val()==="singleitem"?'h2':'h3';};$(document).ready(function(){cdm.init();cdm.util.checkForInternetExplorerAndVersion();cdm.gvars.usernameText=$("#cdm_language_username").val();cdm.gvars.passwordText=$("#cdm_language_password").val();cdm.gvars.cancelText=$("#cdm_language_cancel").val();cdm.gvars.okText=$("#cdm_language_ok").val();cdm.gvars.authenticatingText=$("#cdm_language_authenticating").val();if($("li a#search_results_dd_link").exists()){sbwidth=$("#search_content_box.search_content_box_results").width();sbdropwidth=$("li a#search_results_dd_link").width();if(sbdropwidth>81){diffwidth=(sbdropwidth-81)+2;$("#search_content_box.search_content_box_results").css("width",sbwidth-diffwidth);}}
var loc=new String(window.document.location);if(loc.indexOf("https://")!==-1){cdm.gvars.protocol="https://";}
if(cdm.cdmHttps==='on'&&$("#currentUser").html()!==null&&$("#currentUser").html()!==''&&cdm.gvars.protocol!=="https://"){t=setTimeout("redirectToProtocol('in')",500);}
$("#nav_top_right_language_dd_content").css("display","block").hide();$("#nav_top_left_browse_dd_content").css("display","block").hide();if($("#search_sort_by_dd_content").exists())
$("#search_sort_by_dd_content").css("display","block").hide();if($("#search_display_dd_content").exists())
$("#search_display_dd_content").css("display","block").hide();$("#details_accordion .accordion_window").css("overflow","visible");if(cdm.gvars.internetExplorerVersion===IE_7_VERSION)
{$("#nav_top_right_language_dd_link").css("padding-top","0");$(".link_bar_link").css("padding","3px 34px 0 3px");$("#download_button").css("margin-right","5px");if($(".ui-tabs").exists())
{$(".ui-tabs").css("position","relative").css("padding",".2em").css("zoom","1");$(".ui-tabs .ui-tabs-nav").css("margin","0").css("padding",".2em .2em 0");}
if($("#full_text_container").exists()){$("#full_text_container").css("height",$("#full_text_container").height()+"px");}}
if($("#cdm_collection").exists()){cdm.gvars.collection=$("#cdm_collection").val();if(cdm.gvars.collection.length>0){cdm.gvars.collectionLink="/collection/"+cdm.gvars.collection;}}
if($(".button_table").exists())
{$(".button_table").hover(function(){var button=$(this).parent();if(!button.hasClass("pagination_button_active")&&!button.hasClass("secondary_button_disabled"))
{var name=button.attr("button_type");button_mouse_toggle(name,button,true);}},function(){var button=$(this).parent();if(!button.hasClass("pagination_button_active")&&!button.hasClass("secondary_button_disabled"))
{var name=button.attr("button_type");button_mouse_toggle(name,button,false);}});}
$(".dialog_ok_button, .dialog_cancel_button").click(function(){$(this).parents("div.ui-dialog-content").dialog("close");});if($("#nav_top_right_language_dd_link").exists()){create_dropdown("nav_top_right_language");$("#nav_top_right_language_dd_container").css("margin-left",get_ntr_lang_margin_left());if($(".language_option").exists()){$(".language_option").hover(function(){$(this).addClass("language_option_hover");},function(){$(this).removeClass("language_option_hover");}).click(function(){languageSelectRedir(this);}).keypress(function(event){if(event.keyCode==='13'){languageSelectRedir(this);}});}}
if($(".search_content_button").exists())
$(".search_content_button").hover(function(){$(this).addClass("search_content_button_hover")},function(){$(this).removeClass("search_content_button_hover")});$("#logout_link").click(function(){submit_logout();});if($("#link_bar").exists())
{$(".link_bar_text").hover(function(){$(this).addClass("link_bar_text_hover");if(!$(this).find("span:first").hasClass("at300bs")){$(this).find("span:first").addClass("icon_link_bar_hover");}},function(){$(this).removeClass("link_bar_text_hover").find("span:first").removeClass("icon_link_bar_hover")});if($("#reference_url_link").exists()){$("#reference_url_link").click(function(){dialogOpts.width=630;dialogOpts.height="auto";dialogOpts.zIndex=99999;create_new_dialog("reference_url",dialogOpts);});}
if($("#cite_dialog_accordion").exists())
{var cite_dialog_accordion=$("#cite_dialog_accordion").accordion({header:cdm.gvars.accordionHeading,collapsible:true,active:false,autoHeight:false});cdm_accordion_ini(cite_dialog_accordion,false);}
if($("#cite_link").exists()){$("#cite_link").click(function(){dialogOpts.width=382;create_new_dialog("cite",dialogOpts);});}}
$("#headerWrapper").click(function(){if($("#cdm_collection").val().length>0){wrapperUrl=$("#collectionHomeUrl").val()+"landingpage/collection/"+$("#cdm_collection").val();}else{wrapperUrl=$("#collectionHomeUrl").val();}
cdm.util.pageRedirector(wrapperUrl);});if($("#nav_top_left_first_link").exists())
{$("#nav_top_left_first_link").css("padding-left","30px");}
if($("#details_accordion").exists())
{var cdm_details_accordion=$("#details_accordion").toggleboxes({header:cdm.gvars.accordionHeading,autoHeight:false,active:false,collapsible:true,change:function(event,ui){resizeCompObjHeight();}});if($("#cdm_itemview_accordion_active").val()!=="closed"){open_accordion_section("details",$("#cdm_itemview_accordion_active").val());}
if($("#details_accordion_codescription_link").exists()&&$("#cdm_codescription").val()==="on"){$("#details_accordion_"+$("#cdm_codescription_id").val()+"_link").click().next().show(200);}
if($('#co-sidebar-wrapper').exists()){setTimeout("cdm.CompoundObject.setWrapperHeight()",500);}}
$("#title_desc_bar_text_link").click(function(){if(!$("#details_accordion_description_link").hasClass("accordion_header_open")){open_accordion_section("details","description");}
window_scroll_to_selector("#details");});$("#link_bar_comment_link").click(function(){if(!$("#details_accordion_comments_link").hasClass("accordion_header_open")){open_accordion_section("details","comments");}
window_scroll_to_selector("#details");});$("#link_bar_add_tags_link").click(function(){if(!$("#details_accordion_add_tags_link").hasClass("accordion_header_open")){open_accordion_section("details","add_tags");}
window_scroll_to_selector("#details");});if($("#ratings_dialog").exists()){dialogOpts.width=382;cddh=dialogOpts.height;dialogOpts.height=200;create_new_dialog("ratings",dialogOpts);dialogOpts.height=cddh;}
if($("#img_view_text_container").exists()&&$("#cdm_displayfulltext").val()==="1")
{var img_view_container_offset=75;if($("#cdm_cpdtype").exists()&&$("#cdm_cpdtype").val()==="Document-EAD"){$("div#details").css("margin-top","60px");}
var img_view_text_container_offset=0;var img_view_text_content_offset=65;var imageDiv_offset=135;var min_frame_height=146;var min_content_main_height=min_frame_height+20;frameHeight=$("#content_main").height();$("#img_view_text_container").height(frameHeight-img_view_text_container_offset);$("#img_view_text_content").height(frameHeight-img_view_text_content_offset);if($("#viewer_placeholder").exists()){frameHeightViewer=$("#viewer_placeholder").height();$("#img_view_container").height(frameHeightViewer-img_view_container_offset);$("#imageDiv").height(frameHeightViewer-imageDiv_offset);}
if($("#viewer_wrapper_inner").exists()){frameHeightViewer=$("#viewer_wrapper_inner").height();$("#img_view_container").height(frameHeightViewer-img_view_container_offset);}
var content_main_grip_mouseover_handler=function(){$(this).addClass("content_main_grip_hover");};var content_main_grip_mouseout_handler=function(){$(this).removeClass("content_main_grip_hover");};$("#content_main_grip").mouseover(content_main_grip_mouseover_handler);$("#content_main_grip").mouseout(content_main_grip_mouseout_handler);$("#content_main").resizable({start:function(e,ui){$("#content_main_grip").addClass("content_main_grip_hover");$("#content_main_grip").unbind("mouseout");},resize:function(e,ui){var frameHeight=$("#content_main").height();$("#img_view_text_container").height(frameHeight-img_view_text_container_offset);$("#img_view_text_content").height(frameHeight-img_view_text_content_offset);if($("#viewer_wrapper_inner").exists()){var frameHeightViewer=$("#viewer_wrapper_inner").height();$("#img_view_container").height(frameHeightViewer-img_view_container_offset);}
return false;},stop:function(e,ui){$("#content_main").attr("style","");$("#content_main").css("height","auto");$("#content_main_grip").removeClass("content_main_grip_hover");$("#content_main_grip").bind("mouseout",content_main_grip_mouseout_handler);},minHeight:min_frame_height});}
if($("#results_tn_accordion").exists())
{var results_tn_accordion=$("#results_tn_accordion").accordion({active:false,header:cdm.gvars.accordionHeading,collapsible:true,autoHeight:false});cdm_accordion_ini(results_tn_accordion,false);}
$(cdm.gvars.accordionHeading+".accordion_header").focus(function(){$(this).addClass("accordionHeaderFocusBorder");});$(cdm.gvars.accordionHeading+".accordion_header").blur(function(){$(this).removeClass("accordionHeaderFocusBorder");});if($("#search_sort_by_dd_link").exists())
create_dropdown("search_sort_by");if($("#search_display_dd_link").exists())
create_dropdown("search_display");if($("#reference_url_dd_link").exists())
create_dropdown("reference_url");$("#lp_img_flow_previous, #lp_img_flow_next, #lp_img_flow_slider").hover(function(){var button=$(this).find("div.imageflow_button");var name=button.attr("button_type");button_mouseover(name,button);},function(){var button=$(this).find("div.imageflow_button");var name=button.attr("button_type");button_mouseout(name,button);});var button_html="<div class='imageflow_button' button_type='imageflow'><table class='button_table'><tr><td><span class='imageflow_button_icon icon_circle_triangle_w'></span></td></tr></table></div>";$("#lp_img_flow_previous").html(button_html);button_html="<div class='imageflow_button' button_type='imageflow'><table class='button_table'><tr><td><span class='imageflow_button_icon icon_circle_triangle_e'></span></td></tr></table></div>";$("#lp_img_flow_next").html(button_html);button_html="<div class='imageflow_button' button_type='imageflow'>&nbsp;</div>";$("#lp_img_flow_slider").html(button_html);if($("#nav_top_right").exists()){$(".cdmHelpLink").click(function(e){if($("#collectionHomeUrl").exists()){window.open($("#collectionHomeUrl").val()+"helpdocs"+cdm.gvars.collectionLink,"cdmHelpWindow","menubar=0,resizable=1,width=700,height=600,top=200,left=50,scrollbars=yes");}else{e.preventDefault();}});}
if($("#cdm_helplauncher").val()==="1"){window.open($("#collectionHomeUrl").val()+"helpdocs"+cdm.gvars.collectionLink,"cdmHelpWindow","menubar=0,resizable=1,width=700,height=600,top=200,left=50,scrollbars=yes");}
if($(".dialog_title_bar_close_link").exists())
{$(".dialog_title_bar_close_link").hover(function(){$(this).addClass("dialog_title_bar_close_link_hover").find("span:first").addClass("dialog_title_bar_close_link_inner_hover")},function(){$(this).removeClass("dialog_title_bar_close_link_hover").find("span:first").removeClass("dialog_title_bar_close_link_inner_hover")});$(".dialog_title_bar_close_link").click(function()
{if($(this).parent().parent().hasClass("ui-dialog"))
{var name=$(this).parent().parent().next().attr("dialog_name");if(!name)name=$(this).parent().next().attr("dialog_name");if(true)
{var x=$("#"+name+"_link").offset().left-icon_width;var y=$("#"+name+"_link").offset().top+link_bar_height;$("#"+name+"_dialog").dialog("option","position",[x,y]);}}});}
if($(".cdm_accordion").exists())
{$(".cdm_accordion "+cdm.gvars.accordionHeading+".ui-accordion-header").click(function(){$(".cdm_accordion "+cdm.gvars.accordionHeading+".ui-accordion-header").removeClass("accordion_header_open").addClass("accordion_header_closed").find("span.ui-icon").removeClass("accordion_header_icon_open").addClass("accordion_header_icon_closed");if($(this).hasClass("ui-state-default"))
$(this).removeClass("accordion_header_open").addClass("accordion_header_closed").find("span.ui-icon").removeClass("accordion_header_icon_open").addClass("accordion_header_icon_closed");else
$(this).removeClass("accordion_header_closed").addClass("accordion_header_open").find("span.ui-icon").removeClass("accordion_header_icon_closed").addClass("accordion_header_icon_open");});}
setTimeout("cdm_reset_accordion_tabindexes()",250);$(cdm.gvars.accordionHeading+".accordion_header").each(function(){$(this).click(function(){setTimeout("cdm_reset_accordion_tabindexes()",250);}).keypress(function(event){if(event.keyCode==='13'){setTimeout("cdm_reset_accordion_tabindexes()",250);}});});if($("#search_content_box").exists()){$("#search_content_box").focus();$("#simple_search_button").focusout(function(){$("#skip_nav").focus();});}
cdm.gvars.qvBGColor=$("#cdm_qvBGColor").val();cdm.gvars.qvBorderColor=$("#cdm_qvBorderColor").val();});function resizeCompObjContent(){lpc=$('#leftPaneContent').outerHeight();cow=$('#co-sidebar-wrapper').outerHeight();if(cow<lpc){$('#co-sidebar-wrapper').height(lpc+20);}
setCoTabsHeight();}
function resizeCompObjHeight(){if($("#cdm_view").val()==="compoundobject"){currentAccordionHeight=$("#details_accordion").outerHeight();currentSidebarWrapperHeight=$('#co-sidebar-wrapper').outerHeight();currentLeftPaneContentHeight=$('#leftPaneContent').outerHeight();if(currentLeftPaneContentHeight<cdm.gvars.defaultContentPaneHeight){currentLeftPaneContentHeight=cdm.gvars.defaultContentPaneHeight;}
currentCoTabsHeight=$('#co-tabs').outerHeight();if(cdm.CompoundObject.OriginalSideBarWrapperHeight===0||cdm.CompoundObject.OriginalAccordionHeight===0){cdm.CompoundObject.OriginalSideBarWrapperHeight=currentSidebarWrapperHeight;cdm.CompoundObject.OriginalAccordionHeight=currentAccordionHeight;cdm.CompoundObject.OldAccordionHeight=currentAccordionHeight;}
if(currentCoTabsHeight<currentLeftPaneContentHeight&&!cdm.gvars.compoundObjectResizeTimer){setTimeout("resizeCompObjContent()",1000);cdm.gvars.compoundObjectResizeTimer=true;}else{cdm.gvars.compoundObjectResizeTimer=false;var newDiff=0;if(currentAccordionHeight>cdm.CompoundObject.OldAccordionHeight){newDiff=currentAccordionHeight-cdm.CompoundObject.OldAccordionHeight;}else{newDiff=(cdm.CompoundObject.OldAccordionHeight-currentAccordionHeight)*-1;}
if(cdm.CompoundObject.OldAccordionHeight+newDiff>cdm.CompoundObject.OriginalAccordionHeight){$('#co-sidebar-wrapper').height(currentLeftPaneContentHeight);}else{$('#co-sidebar-wrapper').height(cdm.CompoundObject.OriginalSideBarWrapperHeight);}
cdm.CompoundObject.OldAccordionHeight=currentAccordionHeight;setCoTabsHeight();}}}
function setCoTabsHeight(){if($('#co-tabs').height()<cdm.gvars.defaultContentPaneHeight){$('#co-tabs').height(cdm.gvars.defaultContentPaneHeight+10);}}
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=Base64._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}
output=output+
this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+
this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);}
return output;},decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!==64){output=output+String.fromCharCode(chr2);}
if(enc4!==64){output=output+String.fromCharCode(chr3);}}
output=Base64._utf8_decode(output);return output;},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}
else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}
else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;},_utf8_decode:function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++;}
else if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2;}
else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return string;}};cdm.PageFlipView.bindReturnToItemLink=function(){$("#pageFlipReturnToItem").click(function(){window.location.href=cdm.PageFlipView.buildReturnToItemLink();});};cdm.PageFlipView.buildReturnToItemLink=function(){return $(SELECTOR_COLLECTION_HOME_URL).val()+$(SELECTOR_CDM_RETURNVIEW).val()+cdm.util.buildUrl([COLLECTION_STRING,$(SELECTOR_CDM_COLLECTION).val(),ID_STRING,$(SELECTOR_CDM_ID).val()]);};function thumbnailToggle()
{refreshDebugLayer();$("#thumbnailNav").slideToggle("normal");}
function debugToggle()
{$("#debugLayer").slideToggle("normal");}